name: Check links

on:
  workflow_dispatch:
  workflow_run:
    workflows: ["pages build and deployment"]
    branches: [main, gh-pages]
    types:
      - completed

jobs:
  check_links:
    runs-on: ubuntu-latest
    steps:
      - name: Install lychee
        run: curl -sSf 'https://sh.rustup.rs' | sh
      - name: Run lychee to test for dead links
        run: lychee --no-progress --format detailed https://gambitbsm.github.io/
